"use strict";
! function(i, t) {
	function s() {
		var i = t("header").outerHeight();
		t("nav.menu").css({
			height: "calc(100vh - " + t("header .top").outerHeight() + "px)",
			top: t("header .top").outerHeight() + "px"
		}), t(".main").css("padding-top", i + "px"), t(".main").hasClass("search") && c(i)
	}

	function n() {
		var i = 0,
			s = t("nav.menu ol"),
			n = s.find("li a").css("padding");
		n = n.split(" ").map(function(i) {
			return i.substring(0, i.length - 2)
		}), s.find("li a").css({
			padding: "0",
			display: "inline"
		}), s.find("li").each(function() {
			i = i > t(this).find("a").width() ? i : t(this).find("a").width()
		}).promise().done(function() {
			i = i + 2 * Number(n[n.length - 1]) + 5, s.css("width", i + "px"), s.find("li a").removeAttr("style"), e = i
		})
	}
	var e = 0;
		window.o = {
			second: 1e4,
			$ol: t(".index .notification ol"),
			timer: "",
			init: function() {
				var i = this;
				if(i.$ol.find("li").length < 2) return !1;
				i.$ol.append(i.$ol.find("li:first-child").clone()), i.timer = setTimeout(i.scroll.bind(i), i.second)
			},
			scroll: function() {
				var i = this,
					s = i.$ol.find("li").height(),
					n = i.$ol.find("li").length,
					e = i.$ol.css("top").substring(0, i.$ol.css("top").length - 2);
				i.$ol.animate({
					top: (e -= s) + "px"
				}, 500, function() {
					-e == (n - 1) * s && i.$ol.css("top", "0px")
				}), i.timer = setTimeout(i.scroll.bind(i), i.second)
			}
		};
	var	a = {
			$carouselBox: t(".book-carousel > div"),
			carousel: function() {
				var s = this;
				s.$carouselBox.on("init", function(i) {
					s.$carouselBox.css("visibility", "visible")
				}), s.$carouselBox.slick({
					dots: !0,
					slidesToShow: 5,
					slidesToScroll: 5,
					autoplay: !0,
					autoplaySpeed: 1e4,
					infinite: !0,
					responsive: [{
						breakpoint: 601,
						settings: {
							slidesToShow: 4,
							slidesToScroll: 4
						}
					}, {
						breakpoint: 415,
						settings: {
							slidesToShow: 3,
							slidesToScroll: 3
						}
					}]
				}), s.setBookCarouselImgHeight()
			},
			setBookCarouselImgHeight: function() {
				var i = this.$carouselBox.find(".slick-slide a div").outerWidth();
				this.$carouselBox.find(".slick-slide a div").css("height", 1.33 * i + "px")
			}
		},
		c = function(i) {
			var s = t(".search"),
				n = s.find(".query").outerHeight();
			s.find(".query").css("top", i + "px"), s.find(".result-list").css({
				top: i + n + "px",
				height: "calc(100vh - " + (i + n) + "px)"
			})
		};
	t(i).resize(function() {
		s(), n()
	}), t(document).ready(function() {
		s(), n(), t("header .top .menu-butn").click(function() {
				var i = t("nav.menu").hasClass("active");
				i ? t("nav.menu").removeClass("active") : t("nav.menu").addClass("active"), i ? t(".main").removeClass("no-scroll") : t(".main").addClass("no-scroll"), t("header .top .menu-butn img").attr("src", "dist/img/icon_menu" + (i ? "" : "_close") + ".png")
			}), t("nav.menu").click(function() {
				arguments[0].pageX > e && t("header .top .menu-butn").trigger("click")
			}),
			function() {
				var o = !1;
				t(".account .fingerprint .switch div span").click(function() {
					var i = t(this),
						s = t(this).parent(),
						n = s.find("span").index(s.find(".active")),
						e = !s.hasClass("off");
					if(o || n === i.index()) return !1;
					o = !0, e ? s.addClass("off") : s.removeClass("off"), s.find("span").removeClass("active"), setTimeout(function() {
						i.addClass("active"), o = !1
					}, 300)
				})
			}(),
			function() {
				var n = t(".login .account");
				n.find(".chose").click(function() {
					var i = t(this),
						s = n.find(".account-list").is(":visible");
					s ? i.removeClass("focus").addClass("gray") : i.removeClass("gray").addClass("focus"), s ? n.find(".account-list-box").css("display", "none") : n.find(".account-list-box").css("display", "block")
				}), n.find(".account-list li").click(function() {
					t("#account-id").val(t(this).find(".id").text()), n.find(".chose").removeClass("focus").addClass("gray"), n.find(".account-list-box").css("display", "none")
				})
			}(), t(".main").hasClass("index") && a.carousel(), t(".main").hasClass("index") && o.init()
	})
}(window, jQuery);